// ë‹¤êµ­ì–´ ì§€ì› ì‹œìŠ¤í…œ
const translations = {
    ko: {
        // ê³µí†µ
        directions: "Directions",
        
        // Footer
        footerTerms: "ì´ìš©ì•½ê´€",
        footerPrivacy: "ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨",
        footerCompanyName: "ìƒí˜¸ëª…",
        footerCEO: "ëŒ€í‘œ",
        footerPrivacyOfficer: "ê°œì¸ì •ë³´ë³´í˜¸ì±…ìž„ìž",
        footerBusinessNumber: "ì‚¬ì—…ìžë“±ë¡ë²ˆí˜¸",
        footerAddress: "ì£¼ì†Œ",
        footerEmail: "ì´ë©”ì¼",
        footerContact: "ê³ ê°ë¬¸ì˜",
        footerDescription: "ì½”íŠ¸ë¦¿ì€ ê´‘ê³ ëŒ€í–‰ì—…ì²´ë¡œ ì½”íŠ¸ë¦¿ í”Œëž«í¼ì„ í†µí•˜ì—¬ íŒë§¤ìžì™€ ê³ ê° ì‚¬ì´ì— ì´ë£¨ì–´ì§€ëŠ” í†µì‹ íŒë§¤ì˜ ë‹¹ì‚¬ìžê°€ ì•„ë‹™ë‹ˆë‹¤. ì½”íŠ¸ë¦¿ì„ í†µí•˜ì—¬ ë°©ë¬¸í•˜ëŠ” ì—…ì²´ ì„œë¹„ìŠ¤ì— ê´€í•œ ì˜ë¬´ì™€ ì±…ìž„ì€ í•´ë‹¹ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” ì—…ì²´ì—ê²Œ ìžˆìŠµë‹ˆë‹¤.",
        footerCopyright: "Â© 2025 Kotreet Inc. All rights reserved",
        footerLanguage: "í•œêµ­ì–´",
        
        // Category
        categoryBeauty: "ë·°í‹°",
        categoryGlasses: "ì•ˆê²½ì ",
        categoryDessert: "ë””ì €íŠ¸ ì¹´íŽ˜",
        categoryCloth: "ì˜ë¥˜",
        categoryFood: "ìŒì‹ì ",
        categoryGoods: "êµ¿ì¦ˆìƒµ",
        
        // Category All
        allShopsTitle: "ì „ì²´ ê°€ê²Œ",
        allShopsDesc: "ëª¨ë“  ì§€ì—­ì˜ ëª¨ë“  ì¹´í…Œê³ ë¦¬ ê°€ê²Œë¥¼ ì†Œê°œí•©ë‹ˆë‹¤.",
        
        // Category Type
        popularShopsTitle: "ðŸ”¥ ê°€ìž¥ ë§Žì´ ë³¸ ê°€ê²Œ",
        popularShopsDesc: "ì¡°íšŒìˆ˜ê°€ ë†’ì€ ì¸ê¸° ê°€ê²Œ",
        beautyDesc: "í•œêµ­ì˜ ë·°í‹°ìƒµì„ ì†Œê°œí•©ë‹ˆë‹¤.",
        glassesDesc: "í•œêµ­ì˜ ì•ˆê²½ì ì„ ì†Œê°œí•©ë‹ˆë‹¤.",
        dessertDesc: "í•œêµ­ì˜ ë””ì €íŠ¸ ì¹´íŽ˜ë¥¼ ì†Œê°œí•©ë‹ˆë‹¤.",
        clothDesc: "í•œêµ­ì˜ ì˜ë¥˜ìƒµì„ ì†Œê°œí•©ë‹ˆë‹¤.",
        foodDesc: "í•œêµ­ì˜ ìŒì‹ì ì„ ì†Œê°œí•©ë‹ˆë‹¤.",
        goodsDesc: "í•œêµ­ì˜ êµ¿ì¦ˆìƒµì„ ì†Œê°œí•©ë‹ˆë‹¤.",
        
        // Category Region
        regionPopularTitle: "ðŸ”¥ {region}ì—ì„œ ê°€ìž¥ ë§Žì´ ë³¸ ê°€ê²Œ",
        regionPopularDesc: "ì´ ì§€ì—­ì—ì„œ ì¡°íšŒìˆ˜ê°€ ë†’ì€ ì¸ê¸° ê°€ê²Œ",
        
        // Detail
        detailIntroTitle: "ì ì£¼ ì†Œê°œ",
        detailLocationTitle: "ìœ„ì¹˜",
        detailDirections: "DIRECTIONS",
        
        // ì§€ì—­ëª…
        hongdae: "í™ëŒ€",
        myeongdong: "ëª…ë™",
        gangnam: "ê°•ë‚¨",
        seongsu: "ì„±ìˆ˜",
        
        // Category All Pages
        categoryPageTitle: "CATEGORY",
        locationPageTitle: "LOCATION"
    },
    en: {
        // Common
        directions: "Directions",
        
        // Footer
        footerTerms: "Terms of Service",
        footerPrivacy: "Privacy Policy",
        footerCompanyName: "Company",
        footerCEO: "CEO",
        footerPrivacyOfficer: "Privacy Officer",
        footerBusinessNumber: "Business Registration",
        footerAddress: "Address",
        footerEmail: "Email",
        footerContact: "Contact",
        footerDescription: "Kotreet is an advertising agency and is not a party to the telecommunication sales made between sellers and customers through the Kotreet platform. The obligations and responsibilities for merchant services visited through Kotreet belong to the respective merchant.",
        footerCopyright: "Â© 2025 Kotreet Inc. All rights reserved",
        footerLanguage: "English",
        
        // Category
        categoryBeauty: "Beauty",
        categoryGlasses: "Glasses",
        categoryDessert: "Dessert Cafe",
        categoryCloth: "Clothing",
        categoryFood: "Restaurant",
        categoryGoods: "Goods Shop",
        
        // Category All
        allShopsTitle: "All Shops",
        allShopsDesc: "Introducing shops from all regions and categories.",
        
        // Category Type
        popularShopsTitle: "ðŸ”¥ Most Viewed Shops",
        popularShopsDesc: "Popular shops with high views",
        beautyDesc: "Introducing Korean beauty shops.",
        glassesDesc: "Introducing Korean optical shops.",
        dessertDesc: "Introducing Korean dessert cafes.",
        clothDesc: "Introducing Korean clothing shops.",
        foodDesc: "Introducing Korean restaurants.",
        goodsDesc: "Introducing Korean goods shops.",
        
        // Category Region
        regionPopularTitle: "ðŸ”¥ Most Viewed Shops in {region}",
        regionPopularDesc: "Popular shops with high views in this area",
        
        // Detail
        detailIntroTitle: "Shop Introduction",
        detailLocationTitle: "Location",
        detailDirections: "DIRECTIONS",
        
        // ì§€ì—­ëª…
        hongdae: "Hongdae",
        myeongdong: "Myeongdong",
        gangnam: "Gangnam",
        seongsu: "Seongsu",
        
        // Category All Pages
        categoryPageTitle: "CATEGORY",
        locationPageTitle: "LOCATION"
    }
};

// í˜„ìž¬ ì–¸ì–´ ê°€ì ¸ì˜¤ê¸°
function getCurrentLanguage() {
    return localStorage.getItem('language') || 'ko';
}

// ì–¸ì–´ ì„¤ì •
function setLanguage(lang) {
    localStorage.setItem('language', lang);
    location.reload();
}

// ë²ˆì—­ ê°€ì ¸ì˜¤ê¸°
function t(key, params = {}) {
    const lang = getCurrentLanguage();
    let text = translations[lang][key] || translations['ko'][key] || key;
    
    // íŒŒë¼ë¯¸í„° ì¹˜í™˜
    Object.keys(params).forEach(param => {
        text = text.replace(`{${param}}`, params[param]);
    });
    
    return text;
}

// ì¹´í…Œê³ ë¦¬ ë ˆì´ë¸” ê°€ì ¸ì˜¤ê¸°
function getCategoryLabel(category) {
    const categoryMap = {
        beauty: getCurrentLanguage() === 'en' ? 'Beauty' : 'ë·°í‹°',
        dessert: getCurrentLanguage() === 'en' ? 'Dessert Cafe' : 'ë””ì €íŠ¸ ì¹´íŽ˜',
        glasses: getCurrentLanguage() === 'en' ? 'Glasses' : 'ì•ˆê²½ì ',
        vintage: getCurrentLanguage() === 'en' ? 'Restaurant' : 'ìŒì‹ì ',
        food: getCurrentLanguage() === 'en' ? 'Restaurant' : 'ìŒì‹ì ',
        cloth: getCurrentLanguage() === 'en' ? 'Clothing' : 'ì˜ë¥˜',
        goods: getCurrentLanguage() === 'en' ? 'Goods Shop' : 'êµ¿ì¦ˆìƒµ'
    };
    return categoryMap[category] || category;
}

// ì§€ì—­ ë ˆì´ë¸” ê°€ì ¸ì˜¤ê¸°
function getLocationLabel(location) {
    const lang = getCurrentLanguage();
    const locationMap = {
        'í™ëŒ€': lang === 'en' ? 'Hongdae' : 'í™ëŒ€',
        'ëª…ë™': lang === 'en' ? 'Myeongdong' : 'ëª…ë™',
        'ê°•ë‚¨': lang === 'en' ? 'Gangnam' : 'ê°•ë‚¨',
        'ì„±ìˆ˜': lang === 'en' ? 'Seongsu' : 'ì„±ìˆ˜'
    };
    return locationMap[location] || location;
}

// íŽ˜ì´ì§€ ë¡œë“œ ì‹œ ì–¸ì–´ ì ìš©
function applyLanguage() {
    const lang = getCurrentLanguage();
    document.documentElement.lang = lang;
    
    // data-i18n ì†ì„±ì„ ê°€ì§„ ëª¨ë“  ìš”ì†Œ ë²ˆì—­
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        element.textContent = t(key);
    });
    
    // data-i18n-placeholder ì†ì„±ì„ ê°€ì§„ ëª¨ë“  ìš”ì†Œì˜ placeholder ë²ˆì—­
    document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
        const key = element.getAttribute('data-i18n-placeholder');
        element.placeholder = t(key);
    });
}

// Footer ì–¸ì–´ ì„ íƒ ë²„íŠ¼ ì´ˆê¸°í™”
function initLanguageSelector() {
    const checkFooter = setInterval(() => {
        const langBtn = document.querySelector('.footer-select-btn');
        if (langBtn) {
            clearInterval(checkFooter);
            
            const lang = getCurrentLanguage();
            langBtn.innerHTML = `
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"/>
                    <path d="M2 12h20M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
                </svg>
                ${lang === 'ko' ? 'í•œêµ­ì–´' : 'English'}
            `;
            
            let dropdown = document.querySelector('.language-dropdown');
            if (!dropdown) {
                dropdown = document.createElement('div');
                dropdown.className = 'language-dropdown';
                dropdown.style.cssText = `
                    position: absolute;
                    bottom: 100%;
                    left: 0;
                    background: white;
                    border: 1px solid #ddd;
                    border-radius: 8px;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                    display: none;
                    margin-bottom: 8px;
                    min-width: 120px;
                    z-index: 1000;
                `;
                
                dropdown.innerHTML = `
                    <button class="lang-option" data-lang="ko" style="display: block; width: 100%; padding: 12px 16px; border: none; background: none; text-align: left; cursor: pointer; font-size: 14px; color: #222; transition: background 0.2s;">
                        ðŸ‡°ðŸ‡· í•œêµ­ì–´
                    </button>
                    <button class="lang-option" data-lang="en" style="display: block; width: 100%; padding: 12px 16px; border: none; background: none; text-align: left; cursor: pointer; font-size: 14px; color: #222; transition: background 0.2s;">
                        ðŸ‡ºðŸ‡¸ English
                    </button>
                `;
                
                langBtn.parentElement.style.position = 'relative';
                langBtn.parentElement.appendChild(dropdown);
                
                dropdown.querySelectorAll('.lang-option').forEach(option => {
                    option.addEventListener('mouseenter', (e) => {
                        e.target.style.background = '#f5f5f5';
                    });
                    option.addEventListener('mouseleave', (e) => {
                        e.target.style.background = 'none';
                    });
                    option.addEventListener('click', (e) => {
                        e.preventDefault();
                        e.stopPropagation();
                        const selectedLang = e.target.getAttribute('data-lang');
                        setLanguage(selectedLang);
                    });
                });
            }
            
            langBtn.addEventListener('click', (e) => {
                e.preventDefault();
                e.stopPropagation();
                dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
            });
            
            document.addEventListener('click', (e) => {
                if (!langBtn.contains(e.target) && !dropdown.contains(e.target)) {
                    dropdown.style.display = 'none';
                }
            });
        }
    }, 100);
    
    setTimeout(() => clearInterval(checkFooter), 10000);
}

// ì´ˆê¸°í™”
if (typeof window !== 'undefined') {
    window.addEventListener('DOMContentLoaded', () => {
        applyLanguage();
        initLanguageSelector();
    });
}